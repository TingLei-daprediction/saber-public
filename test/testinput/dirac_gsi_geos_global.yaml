background error:
  covariance model: SABER
  adjoint test: true
  saber central block:
    saber block name: gsi hybrid covariance # note: it actually is a static covariance; hybrid is specified for testing purpose
    read:
      gsi error covariance file: testdata/gsi-coeffs-gmao-global-l72x72y46.nc4
      gsi berror namelist file: testdata/dirac_gsi_geos_global.nml
      gsi akbk: /dev/null
      debugging mode: false
  saber outer blocks:
  # The quench geometry used in this test has the same gridpoints as the GSI grid, but in atlas's
  # ordering (north-to-south) instead of GSI's ordering (south-to-north). We use an interpolation
  # block to reorder the grid points to match GSI order. This is not very efficient, but is fine
  # for a ctest.
  - saber block name: gsi interpolation to model grid
    gsi error covariance file: testdata/gsi-coeffs-gmao-global-l72x72y46.nc4
    gsi berror namelist file: testdata/dirac_gsi_geos_global.nml
    gsi akbk: /dev/null
    debugging mode: false
dirac:
  lon:
  - 0.0
  lat:
  - 2.0
  level:
  - 72
  variable:
  - air_horizontal_streamfunction
geometry:
  function space: StructuredColumns
  grid:
    type: regular_lonlat
    nx: 72
    ny: 46
  groups:
  - variables:
    - air_horizontal_streamfunction
    - air_horizontal_velocity_potential
    levels: 72
  - variables:
    - air_pressure_at_surface
    levels: 1
background:
  date: 2010-01-01T12:00:00Z
  state variables:
  - air_horizontal_streamfunction
  - air_horizontal_velocity_potential
  - air_pressure_at_surface
output dirac:
  mpi pattern: '%MPI%'
  filepath: testdata/dirac_gsi_geos_global/%MPI%_dirac_%id%
test:
  float relative tolerance: 1.5e-06
  reference filename: testref/dirac_gsi_geos_global.ref
