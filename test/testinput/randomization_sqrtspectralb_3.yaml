geometry:
  function space: StructuredColumns
  grid:
    type: regular_gaussian
    N: 12
  groups:
  - variables:
    - air_horizontal_streamfunction
    - air_horizontal_velocity_potential
    - eastward_wind
    - dry_air_density_levels_minus_one
    - geostrophic_pressure_levels_minus_one
    - mu
    - northward_wind 
    - unbalanced_pressure_levels_minus_one 
    levels: 70
  - variables:
    - air_pressure_levels
    - hydrostatic_pressure_levels
    levels: 71
  partitioner: ectrans
background:
  date: 2010-01-01T12:00:00Z
  state variables:
  - air_pressure_levels
  - dry_air_density_levels_minus_one
  - eastward_wind
  - geostrophic_pressure_levels_minus_one
  - hydrostatic_pressure_levels
  - mu
  - northward_wind
  - unbalanced_pressure_levels_minus_one
  filepath: testdata/gauss_state
background error:
  covariance model: SABER
  randomization size: 10
  saber central block:
    saber block name: ID
    active variables:
    - air_horizontal_streamfunction
    - air_horizontal_velocity_potential
    - mu
    - unbalanced_pressure_levels_minus_one    
  saber outer blocks:
  - saber block name: square root of spectral covariance
    skip inverse test: true
    read:
      covariance_file: testdata/error_covariance_training_spectralb_1/spectralsabercov_1.nc
    active variables:
    - air_horizontal_streamfunction
    - air_horizontal_velocity_potential
    - mu
    - unbalanced_pressure_levels_minus_one  
  - saber block name: spectral to gauss
    active variables:
    - air_horizontal_streamfunction
    - air_horizontal_velocity_potential
    - eastward_wind
    - mu
    - northward_wind
    - unbalanced_pressure_levels_minus_one
  - saber block name: gauss winds to geostrophic pressure
    skip inverse test: true  # Tested within mo_hydrostatic_pressure block
  - saber block name: mo_hydrostatic_pressure_from_geostrophic_pressure
    skip inverse test: true  # Tested within mo_hydrostatic_pressure block
    read:
      covariance file path: testdata/FPstats.nc
      number of covariance latitude rings: 481
      gp regression bins: 18
output variance:  # This section is optional
  mpi pattern: '%MPI%'
  filepath: testdata/randomization_sqrtspectralb_3/variance_%MPI%pes
output perturbations:
  member pattern: '%MEM%'
  filepath: testdata/randomization_sqrtspectralb_3/randomized_gauss_mb%MEM%
test:
  reference filename: testref/randomization_sqrtspectralb_3.ref
